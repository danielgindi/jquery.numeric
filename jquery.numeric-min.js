/*
    Library by Daniel Cohen Gindi (danielgindi@gmail.com)
    MIT License!
*/
(function(b){function m(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var e=(1.1).toLocaleString().match(/\d(.*?)\d/)[1],n=new RegExp("\\"+m(e),"g");b.fn.numeric=function(a){this.each(function(f,d){var c="INPUT"===d.tagName;"boolean"===typeof a&&(a={decimal:a});a=a||{};"undefined"===typeof a.negative&&(a.negative=c?d.getAttribute("min")?0>parseFloat(d.getAttribute("min")):!0:!0);var g=!1===a.decimal?"":a.decimal||e,k=!!a.negative;g&&"INPUT"===this.tagName&&"number"===this.type&&
"valueAsNumber"in this&&(g=e);"undefined"===typeof a.decimal&&c&&(c=d.getAttribute("step"))&&"any"!==c&&-1===c.indexOf(".")&&(g="");return b(d).data("numeric.decimal",g).data("numeric.negative",k).on("keypress.numericValue",b.fn.numeric.a).on("keyup.numericValue",b.fn.numeric.a).on("blur.numericValue",b.fn.numeric.a).on("input.numericValue",b.fn.numeric.a)});return this};b.fn.valueAsNumber=function(){if(!this.length)return null;var a=arguments;if(a.length)return this.each(function(){"INPUT"===this.tagName&&
"number"===this.type&&"valueAsNumber"in this?this.valueAsNumber=a[0]:this.value=a[0].toString().replace(/\./,b.data(this,"numeric.decimal")||e)});else{if("INPUT"===this[0].tagName&&"number"===this[0].type&&"valueAsNumber"in this[0])return this[0].valueAsNumber;var f=this.data("numeric.decimal"),f=f?new RegExp(m(f),"g"):n;return""===this[0].value?null:parseFloat(this[0].value.replace(f,"."))}};b.fn.numeric.a=function(){var a=b.data(this,"numeric.decimal");var f=b.data(this,"numeric.negative"),d=this.value,
c="",g=!1;if("number"!==this.type)var k=this.selectionStart,e=this.selectionEnd;a&&m(a);a&&m(a);for(var h=0,l;h<d.length;h++)l=d.charAt(h),"0"<=l&&"9">=l||f&&"-"===l&&!c.length?c+=l:a&&d.substr(h,a.length)===a&&!g?(g=!0,c+=a,h+=a.length-1):(h<=k&&k--,h<=e&&e--);d!==c&&(this.value=c,"number"!==this.type&&(this.selectionStart=k,this.selectionEnd=e))};b.fn.removeNumeric=function(){return this.removeData("numeric.decimal").removeData("numeric.negative").off(".numericValue")}})(jQuery);
